# æ—¥å¿—è¾“å‡ºç»„

::: tip è¯´æ˜
æœ¬ç« ä¸­ä½¿ç”¨çš„å®å˜é‡å­˜å‚¨åœ¨```Core.Macros```ä¸­ã€‚
:::

**æ—¥å¿—è¾“å‡ºç»„**æä¾›äº†å°†ä¸€ä¸ªæˆ–å¤šä¸ª[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)è¿›è¡Œç»„åˆçš„èƒ½åŠ›ã€‚åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®º**æ—¥å¿—è¾“å‡ºç»„**çš„ä½¿ç”¨æ–¹å¼ã€‚

æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ**æ—¥å¿—è¾“å‡ºç»„**æ— æ³•é€šè¿‡å®ä¾‹åŒ–ç›´æ¥åˆ›å»ºå®ä¾‹ï¼Œè€Œæ˜¯ä¾èµ–[LoggerCore](#loggercore)æ‰§è¡Œ```createGroupLogger()```é—´æ¥æ‰§è¡Œå®ä¾‹åŒ–ã€‚

::: tip è¯´æ˜
åœ¨è®¾è®¡ä¸Šï¼Œ**æ—¥å¿—è¾“å‡ºç»„**ä½¿ç”¨äº†å…¸å‹çš„å·¥å‚æ¨¡å¼ï¼Œå³[LoggerCore](#loggercore)æ˜¯ç”Ÿäº§**æ—¥å¿—è¾“å‡ºç»„**çš„å·¥å‚ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨**æ—¥å¿—è¾“å‡ºç»„**è¿›è¡Œç»„åˆæ—¥å¿—è¾“å‡ºéœ€è¦ï¼š

- å°†éœ€è¦ç»„åˆçš„[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)ç»„æˆ**LoggerCore**çš„é…ç½®å‚æ•°åˆ›å»º**LoggerCore**å®ä¾‹ã€‚

- ä½¿ç”¨**LoggerCore**å®ä¾‹æ‰§è¡Œ```createGroupLogger()```å¹¶ä¼ å…¥æœŸæœ›çš„**æ—¥å¿—è¾“å‡ºç»„**ç±»å‹å’Œé…ç½®å‚æ•°ï¼Œå³å¯å¾—åˆ°å¯¹åº”çš„**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹ã€‚
:::

## è¡Œä¸ºæ§åˆ¶

åœ¨å¼•å…¥äº†[LoggerCore](#loggercore)å’Œ**æ—¥å¿—è¾“å‡ºç»„**åï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥è§¦å‘**æ—¥å¿—è¾“å‡ºç»„**ç»„åˆçš„[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)çš„æ„å»ºã€å¯åŠ¨å’Œå…³é—­åŠ¨ä½œã€‚è€Œæ˜¯åœ¨å®ä¾‹åŒ–[LoggerCore](#loggercore)ä½¿ç”¨çš„é…ç½®å‚æ•°ä¸­æŒ‡å®šè¿™äº›åŠ¨ä½œçš„è§¦å‘æ–¹å¼ï¼Œä½¿**LoggerCore**å’Œ**æ—¥å¿—è¾“å‡ºç»„**åœ¨æ°å½“çš„æ—¶é—´ç‚¹è‡ªåŠ¨æ‰§è¡Œè¿™äº›åŠ¨ä½œä»¥æ»¡è¶³æ—¥å¿—æ”¶é›†çš„åœºæ™¯ã€‚

### è¾“å‡ºå™¨æ„å»º

æˆ‘ä»¬åœ¨[LoggerCore](#loggercore)æ„å»ºæ—¶çš„é…ç½®å‚æ•°ä¸­æŒ‡å®šæ¯ä¸ª[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)çš„```buildTrigger```ä»¥æ§åˆ¶ä½•æ—¶åˆ›å»ºè¿™äº›**æ—¥å¿—è¾“å‡ºå™¨**çš„å®ä¾‹ï¼š

- **```init```**ï¼šåœ¨**LoggerCore**å®ä¾‹åŒ–æ—¶è§¦å‘**æ—¥å¿—è¾“å‡ºå™¨**çš„æ„å»ºåŠ¨ä½œã€‚é€šå¸¸ï¼ŒæŒç»­å‹è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘æ„å»ºï¼Œæ¯”å¦‚ï¼š[æ—¥æœŸè¾“å‡ºå™¨](/guide/logger-introduce.html#æ—¥æœŸè¾“å‡ºå™¨)ã€‚

- **```create```**ï¼šåœ¨**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹åŒ–æ—¶è§¦å‘**æ—¥å¿—è¾“å‡ºå™¨**çš„æ„å»ºåŠ¨ä½œï¼Œå³ï¼š**LoggerCore**å®ä¾‹æ‰§è¡Œ```createGroupLogger()```æ—¶ã€‚é€šå¸¸ï¼Œä¸´æ—¶å‹è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘æ„å»ºï¼Œæ¯”å¦‚ï¼š[æ–‡ä»¶è¾“å‡ºå™¨](/guide/logger-introduce.html#æ–‡ä»¶è¾“å‡ºå™¨)ã€‚

::: tip æç¤º

åŸåˆ™ä¸Šï¼Œ**LoggerCore**å®ä¾‹åŒ–åŠ¨ä½œä»…æ‰§è¡Œä¸€æ¬¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœŸæœ›è¢«**LoggerCore**åˆ›å»ºçš„æ‰€æœ‰**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹å…±äº«çš„**æ—¥å¿—è¾“å‡ºå™¨**ä½¿ç”¨```init```æ–¹å¼è§¦å‘æ„å»ºã€‚

æ¯”å¦‚å¯¹ä¸€äº›é¢‘æ¬¡å‹ä¸šåŠ¡äº§ç”Ÿçš„æ—¥å¿—è¿›è¡Œæ”¶é›†æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›å°†æ¯æ¬¡ä¸šåŠ¡æ‰§è¡Œæ—¶çš„åŸºç¡€ä¿¡æ¯é€šè¿‡ç›¸åŒçš„**æ—¥å¿—è¾“å‡ºå™¨**è¿›è¡Œæ”¶é›†ï¼Œè€Œæ¯æ¬¡ä¸šåŠ¡æ‰§è¡Œé“¾è·¯äº§ç”Ÿçš„æ—¥å¿—ä½¿ç”¨ä¸åŒçš„**æ—¥å¿—è¾“å‡ºå™¨**æ”¶é›†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ï¼š

- æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**å…±äº«çš„**æ—¥å¿—è¾“å‡ºå™¨**ä½¿ç”¨```init```æ–¹å¼è§¦å‘æ„å»ºã€‚

- æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**éå…±äº«çš„**æ—¥å¿—è¾“å‡ºå™¨**ä½¿ç”¨```create```æ–¹å¼è§¦å‘æ„å»ºã€‚

- æ¯æ¬¡ä¸šåŠ¡æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨**LoggerCore**å®ä¾‹æ‰§è¡Œ```createGroupLogger()```åˆ›å»ºæ–°çš„**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹ç”¨äºé“¾è·¯ä¸­çš„æ—¥å¿—æ”¶é›†ã€‚

:::

### è¾“å‡ºå™¨å¯åŠ¨

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨[LoggerCore](#loggercore)æ„å»ºæ—¶çš„é…ç½®å‚æ•°ä¸­æŒ‡å®šæ¯ä¸ª[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)çš„```startTrigger```ä»¥æ§åˆ¶ä½•æ—¶å¯åŠ¨è¿™äº›**æ—¥å¿—è¾“å‡ºå™¨**çš„å®ä¾‹ï¼š

- **```none```**ï¼š**LoggerCore**å’Œ**æ—¥å¿—è¾“å‡ºç»„**ä¸æ‰§**æ—¥å¿—è¾“å‡ºå™¨**çš„å¯åŠ¨åŠ¨ä½œã€‚é€šå¸¸ï¼Œæ”¯æŒè‡ªåŠ¨å¯åŠ¨çš„è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘å¯åŠ¨ï¼Œæ¯”å¦‚ï¼š[æ—¥æœŸè¾“å‡ºå™¨](/guide/logger-introduce.html#æ—¥æœŸè¾“å‡ºå™¨)ã€è‡ªåŠ¨æ¨¡å¼ä¸‹çš„[æ–‡ä»¶è¾“å‡ºå™¨](/guide/logger-introduce.html#æ–‡ä»¶è¾“å‡ºå™¨)ã€‚

- **```normal```**ï¼šåœ¨**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹æ‰§è¡Œ```start()```æ—¶è§¦å‘**æ—¥å¿—è¾“å‡ºå™¨**çš„å¯åŠ¨åŠ¨ä½œï¼Œå³ï¼š**æ—¥å¿—è¾“å‡ºå™¨**ä¼´éš**æ—¥å¿—è¾“å‡ºç»„**å¯åŠ¨ã€‚é€šå¸¸ï¼Œä¸æ”¯æŒè‡ªåŠ¨å¯åŠ¨çš„è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘å¯åŠ¨ï¼Œæ¯”å¦‚ï¼šæ‰‹åŠ¨æ¨¡å¼ä¸‹çš„[æ–‡ä»¶è¾“å‡ºå™¨](/guide/logger-introduce.html#æ–‡ä»¶è¾“å‡ºå™¨)ã€‚
  
### è¾“å‡ºå™¨å…³é—­

åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨[LoggerCore](#loggercore)æ„å»ºæ—¶çš„é…ç½®å‚æ•°ä¸­æŒ‡å®šæ¯ä¸ª[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)çš„```closeTrigger```ä»¥æ§åˆ¶ä½•æ—¶å…³é—­è¿™äº›**æ—¥å¿—è¾“å‡ºå™¨**çš„å®ä¾‹ï¼š

- **```none```**ï¼š**LoggerCore**å’Œ**æ—¥å¿—è¾“å‡ºç»„**ä¸æ‰§**æ—¥å¿—è¾“å‡ºå™¨**çš„å…³é—­åŠ¨ä½œã€‚é€šå¸¸ï¼Œæ”¯æŒè‡ªåŠ¨å…³é—­çš„è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘å…³é—­ï¼Œæ¯”å¦‚ï¼šè‡ªåŠ¨æ¨¡å¼ä¸‹çš„[æ–‡ä»¶è¾“å‡ºå™¨](/guide/logger-introduce.html#æ–‡ä»¶è¾“å‡ºå™¨)ã€‚

- **```normal```**ï¼šåœ¨**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹æ‰§è¡Œ```close()```æ—¶è§¦å‘**æ—¥å¿—è¾“å‡ºå™¨**çš„å…³é—­åŠ¨ä½œï¼Œå³ï¼š**æ—¥å¿—è¾“å‡ºå™¨**ä¼´éš**æ—¥å¿—è¾“å‡ºç»„**å…³é—­ã€‚é€šå¸¸ï¼Œä¸æ”¯æŒè‡ªåŠ¨å…³é—­çš„è¾“å‡ºå™¨ä½¿ç”¨æ­¤æ–¹å¼è§¦å‘å…³é—­ï¼Œæ¯”å¦‚ï¼š[æ—¥æœŸè¾“å‡ºå™¨](/guide/logger-introduce.html#æ—¥æœŸè¾“å‡ºå™¨)ã€æ‰‹åŠ¨æ¨¡å¼ä¸‹çš„[æ–‡ä»¶è¾“å‡ºå™¨](/guide/logger-introduce.html#æ–‡ä»¶è¾“å‡ºå™¨)ã€‚

## LoggerCore

æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ**LoggerCore**æ˜¯ç”Ÿäº§**æ—¥å¿—è¾“å‡ºç»„**çš„å·¥å‚ã€‚

é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠ**LoggerCore**å®ä¾‹åœ¨ç›¸åŒçš„æ—¥å¿—æ”¶é›†åœºæ™¯ä¸­å…±äº«ã€‚åœ¨ä¸šåŠ¡æ‰§è¡Œæ—¶ï¼Œä½¿ç”¨```createGroupLogger()```åˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹ç”¨äºè·Ÿè¸ªä¸šåŠ¡é“¾è·¯ä¸­äº§ç”Ÿçš„æ—¥å¿—ã€‚

---

**LoggerCore**å®ä¾‹åˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹å®é™…ä¸Šæ‰§è¡Œäº†ä¸¤ä¸ªåŠ¨ä½œï¼š

1. **LoggerCore**å®ä¾‹æ ¹æ®å®ä¾‹åŒ–æ—¶åº”ç”¨çš„é…ç½®å‚æ•°ï¼Œåˆ›å»ºéœ€è¦ç»„åˆçš„[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)å®ä¾‹å¹¶ç»„æˆå¾…æ¤å…¥**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹çš„**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚

2. å®ä¾‹åŒ–```createGroupLogger()```æŒ‡å®šçš„**æ—¥å¿—è¾“å‡ºç»„**ï¼Œå¾—åˆ°å¯¹åº”çš„**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹ã€‚**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹åŒ–æ—¶ä¼šåº”ç”¨â‘ ä¸­æ„é€ çš„**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚

::: tip è¯´æ˜

**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ä¸­çš„å…ƒç´ å…¶å®å¹¶ä¸ä»…ä»…æ˜¯**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«äº†**æ—¥å¿—è¾“å‡ºå™¨**çš„è¡Œä¸ºè§¦å‘æ–¹å¼çš„```Object```ï¼Œå…¶ç»“æ„ä¸ºï¼š

- **```logger```**ï¼š**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ã€‚

- **```startTrigger```**ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„å¯åŠ¨è§¦å‘æ–¹å¼ã€‚

- **```closeTrigger```**ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„å…³é—­è§¦å‘æ–¹å¼ã€‚

**æ—¥å¿—è¾“å‡ºç»„**å°†æ ¹æ®**è¡Œä¸ºè§¦å‘æ–¹å¼**åœ¨æ°å½“çš„æ—¶é—´ç‚¹æ‰§è¡Œ**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹çš„ç›¸å…³åŠ¨ä½œã€‚

:::

### é…ç½®è¯´æ˜

é€šå¸¸ï¼Œå®ä¾‹åŒ–**LoggerCore**éœ€è¦ä½¿ç”¨ç”±**æ ‡è¯†ID**ã€**è¾“å‡ºå™¨åŸºç¡€é…ç½®**å’Œ**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**æ„æˆçš„é…ç½®å¯¹è±¡ï¼Œå³ï¼š```{ id, env, level, params, loggers }```ã€‚

- ```id```ï¼š**LoggerCore**çš„å”¯ä¸€æ ‡è¯†ï¼Œé»˜è®¤å€¼ä¸º``` `LoggerCore_${generateRandomString(6, 'uln')}` ```ã€‚

::: tip æç¤º
æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å”¯ä¸€çš„```id```æ ‡è¯†å’Œå­˜å‚¨**LoggerCore**å®ä¾‹ä»¥å®ç°åœ¨ç›¸åŒæ—¥å¿—æ”¶é›†åœºæ™¯ä¸­å…±äº«**LoggerCore**å®ä¾‹ã€‚
:::

- ```env```ï¼š**LoggerCore**çš„è¿è¡Œç¯å¢ƒ/**æ—¥å¿—è¾“å‡ºå™¨**çš„åŸºç¡€è¿è¡Œç¯å¢ƒï¼Œé»˜è®¤å€¼ä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**è¿è¡Œç¯å¢ƒ**å°†å½±å“**LoggerCore**çš„è¡Œä¸ºï¼š

  - å½“è¿è¡Œç¯å¢ƒä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```æ—¶ï¼Œ**LoggerCore**åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æ—¶å°†å¿½ç•¥é…ç½®å¯¹è±¡ä¸­æŒ‡å®šçš„**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ã€‚

  - å½“è¿è¡Œç¯å¢ƒä¸ä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```æ—¶ï¼Œ**LoggerCore**åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æ—¶å°†åº”ç”¨é…ç½®å¯¹è±¡ä¸­å®é™…æŒ‡å®šçš„**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ã€‚
  
  ::: tip è¯´æ˜
  å½“è¿è¡Œç¯å¢ƒä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```æ—¶ï¼Œ**LoggerCore**å°†ä¸å†ä½¿ç”¨é…ç½®å¯¹è±¡ä¸­æŒ‡å®šçš„**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ª[åŸºç¡€è¾“å‡ºå™¨](/guide/logger-introduce.html#åŸºç¡€è¾“å‡ºå™¨)å°†æ—¥å¿—å•ç‚¹è¾“å‡ºè‡³æ§åˆ¶å°ï¼Œå…¶è§¦å‘æ–¹å¼ä¸ºï¼š

  - **æ„å»ºè§¦å‘æ–¹å¼**ï¼š```init```ã€‚

  - **å¯åŠ¨è§¦å‘æ–¹å¼**ï¼š```none```ã€‚

  - **å…³é—­è§¦å‘æ–¹å¼**ï¼š```none```ã€‚
  :::
  
  ---

  å¦å¤–ï¼Œæ­¤é…ç½®å°†ä½œä¸ºåœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­æŒ‡å®š**æ—¥å¿—è¾“å‡ºå™¨**è¿è¡Œç¯å¢ƒ```env```æ—¶çš„é»˜è®¤å€¼ï¼š

  - æœªæŒ‡å®š**æ—¥å¿—è¾“å‡ºå™¨**çš„```env```æ—¶ï¼Œä½¿ç”¨æ­¤é…ç½®ã€‚

  - æŒ‡å®šäº†**æ—¥å¿—è¾“å‡ºå™¨**çš„```env```æ—¶ï¼Œä½¿ç”¨å®é™…é…ç½®ã€‚

- ```level```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„åŸºç¡€æœ€å°æ—¥å¿—è¾“å‡ºç­‰çº§çš„åç§°æˆ–åˆ«åã€‚

  ä¸[æ—¥å¿—è¾“å‡ºå™¨](/guide/logger-introduce)ç›¸åŒï¼Œæ­¤é…ç½®çš„é»˜è®¤å€¼ä¾èµ–äºå½“å‰**LoggerCore**çš„**è¿è¡Œç¯å¢ƒ**ï¼š

  - å½“è¿è¡Œç¯å¢ƒä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```æ—¶ï¼Œé»˜è®¤å€¼ä¸ºï¼š```all```ã€‚

  - å½“è¿è¡Œç¯å¢ƒä¸ä¸º```BASE_LOGGER_DEVELOPMENT_ENVIRONMENT```æ—¶ï¼Œé»˜è®¤å€¼ä¸ºï¼š```error```ã€‚

  æ­¤é…ç½®çš„æ„ä¹‰åœ¨äºï¼Œå°†ä½œä¸ºåœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­æŒ‡å®š**æ—¥å¿—è¾“å‡ºå™¨**æœ€å°æ—¥å¿—è¾“å‡ºç­‰çº§```level```æ—¶çš„é»˜è®¤å€¼ï¼š

  - æœªæŒ‡å®š**æ—¥å¿—è¾“å‡ºå™¨**çš„```level```æ—¶ï¼Œä½¿ç”¨æ­¤é…ç½®ã€‚

  - æŒ‡å®šäº†**æ—¥å¿—è¾“å‡ºå™¨**çš„```level```æ—¶ï¼Œä½¿ç”¨å®é™…é…ç½®ã€‚

- ```params```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„åŸºç¡€åŠŸèƒ½é…ç½®å‚æ•°ã€‚

- ```loggers```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„é…ç½®åˆ—è¡¨ï¼Œå…¶å…ƒç´ ç»“æ„ä¸ºï¼š```{ type, buildTrigger, startTrigger, closeTrigger, env, level, params }```ã€‚

  - ```type```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨Corejså†…ç½®çš„**æ—¥å¿—è¾“å‡ºå™¨**æˆ–[è‡ªå®šä¹‰è¾“å‡ºå™¨](/guide/logger-customizing.html)ï¼Œé»˜è®¤å€¼ä¸º```null```ã€‚
    
    ::: warning æ³¨æ„
    **LoggerCore**åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æ—¶å°†å¯¹ä½¿ç”¨çš„```type```è¿›è¡Œæ ¡éªŒã€‚å¦‚æœæŒ‡å®šäº†æœªç»§æ‰¿è‡ª```Core.BaseLogger```çš„**è‡ªå®šä¹‰è¾“å‡ºå™¨**æ—¶ï¼Œå°†è®¤ä¸º**æ—¥å¿—è¾“å‡ºå™¨**çš„ç±»å‹æ— æ•ˆï¼Œä¸å†æ‰§è¡Œå®é™…æ„å»ºåŠ¨ä½œã€‚
    :::

  - ```buildTrigger```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„**æ„å»ºè§¦å‘æ–¹å¼**ï¼Œé»˜è®¤å€¼ä¸º```'init'```ã€‚

  - ```startTrigger```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„**å¯åŠ¨è§¦å‘æ–¹å¼**ï¼Œé»˜è®¤å€¼ä¸º```'none'```ã€‚

  - ```closeTrigger```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„**å…³é—­è§¦å‘æ–¹å¼**ï¼Œé»˜è®¤å€¼ä¸º```'none'```ã€‚

  ::: tip æç¤º
  å…³äº**æ—¥å¿—è¾“å‡ºå™¨**çš„è¡Œä¸ºè§¦å‘æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ[è¡Œä¸ºæ§åˆ¶](#è¡Œä¸ºæ§åˆ¶)ä¸€èŠ‚ã€‚
  :::

  - ```env```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„**è¿è¡Œç¯å¢ƒ**ï¼Œé»˜è®¤å€¼ä¸º**LoggerCore**çš„**è¿è¡Œç¯å¢ƒ**ã€‚

  - ```level```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**æœ€å°æ—¥å¿—è¾“å‡ºç­‰çº§çš„åç§°æˆ–åˆ«åï¼Œé»˜è®¤å€¼ä¸º**LoggerCore**çš„æœ€å°æ—¥å¿—è¾“å‡ºç­‰çº§åç§°æˆ–åˆ«åã€‚

  - ```params```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„åŠŸèƒ½é…ç½®å‚æ•°ã€‚

  ::: tip æç¤º
  å…³äº**æ—¥å¿—è¾“å‡ºå™¨**çš„**è¿è¡Œç¯å¢ƒ**ã€**æœ€å°è¾“å‡ºç­‰çº§**å’Œ**åŠŸèƒ½é…ç½®å‚æ•°**ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒ**æ—¥å¿—è¾“å‡ºå™¨**çš„[åŠŸèƒ½é…ç½®](/guide/logger-introduce.html#è¾“å‡ºå™¨é…ç½®)ä¸€èŠ‚ã€‚
  :::

### é…ç½®å‚æ•°

åœ¨**LoggerCore**åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æ—¶ï¼Œåº”ç”¨çš„**é…ç½®å‚æ•°**é€šè¿‡å°†**ä¸ªæ€§åŒ–é…ç½®å‚æ•°**åˆå¹¶è‡³**é»˜è®¤é…ç½®å‚æ•°**ç”Ÿæˆï¼š

- **ä¸ªæ€§åŒ–é…ç½®å‚æ•°**å³æ˜¯åœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**å¯¹**æ—¥å¿—è¾“å‡ºå™¨**æŒ‡å®šçš„**é…ç½®å‚æ•°**ã€‚

- **é»˜è®¤é…ç½®å‚æ•°**å¯èƒ½ç”±ä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š

  1. **LoggerCore**å®ä¾‹åŒ–æ—¶æŒ‡å®šçš„```env```ã€```level```å’Œ```params```ç»„æˆçš„**é…ç½®å‚æ•°**ã€‚

  2. **LoggerCore**å®ä¾‹æ‰§è¡Œ```createGroupLogger()```æ—¶ä¼ å…¥çš„**é…ç½®å‚æ•°**ã€‚

#### é»˜è®¤é…ç½®å‚æ•°
---

- **ä½¿ç”¨```init```è§¦å‘åˆ›å»ºè¡Œä¸ºçš„æ—¥å¿—è¾“å‡ºå™¨**ï¼Œå…¶å®ä¾‹åŒ–æ—¶ä½¿ç”¨çš„**é»˜è®¤é…ç½®å‚æ•°**å°†ä»…ç”±**LoggerCore**å®ä¾‹åŒ–æ—¶æŒ‡å®šçš„```env```ã€```level```å’Œ```params```ç»„æˆã€‚

- **ä½¿ç”¨```create```è§¦å‘åˆ›å»ºè¡Œä¸ºçš„æ—¥å¿—è¾“å‡ºå™¨**ï¼Œå¯¹äºå…¶ä½¿ç”¨çš„**é»˜è®¤é…ç½®å‚æ•°**ï¼š
  
  1. ä½¿ç”¨```Object.assign()```å°†```createGroupLogger()```æ—¶ä¼ å…¥**é…ç½®å‚æ•°**çš„åŠŸèƒ½é…ç½®å‚æ•°```params```ä¸**LoggerCore**å®ä¾‹åŒ–æ—¶æŒ‡å®šçš„åŸºç¡€åŠŸèƒ½é…ç½®å‚æ•°```params```åˆå¹¶ï¼Œå¾—åˆ°```{ params }```ã€‚

  2. ä½¿ç”¨```Object.assign()```å°†```createGroupLogger()```æ—¶ä¼ å…¥**é…ç½®å‚æ•°**çš„**è¿è¡Œç¯å¢ƒ**ä¸**æœ€å°è¾“å‡ºç­‰çº§**ç»„æˆ```{ env, level }```å¹¶ä¸**LoggerCore**å®ä¾‹åŒ–æ—¶æŒ‡å®š```env```å’Œ```level```åˆå¹¶ï¼Œå¾—åˆ°```{ env, level }```ã€‚

  3. ä½¿ç”¨```Object.assign()```åˆå¹¶â‘ å’Œâ‘¡å¾—åˆ°**é»˜è®¤é…ç½®å‚æ•°**ã€‚

#### åº”ç”¨é…ç½®å‚æ•°
---

åœ¨åˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æ—¶ï¼Œ**LoggerCore**ä½¿ç”¨ä¸[é»˜è®¤é…ç½®å‚æ•°](#é»˜è®¤é…ç½®å‚æ•°)ç±»ä¼¼çš„æ–¹å¼åˆå¹¶**ä¸ªæ€§åŒ–é…ç½®å‚æ•°**å’Œ**é»˜è®¤é…ç½®å‚æ•°**ç”Ÿæˆæœ€ç»ˆåº”ç”¨äº**æ—¥å¿—è¾“å‡ºå™¨**çš„é…ç½®å‚æ•°ã€‚å› æ­¤ï¼Œé…ç½®å‚æ•°çš„ä¼˜å…ˆçº§é¡ºåºä»é«˜åˆ°ä½ä¾æ¬¡ä¸ºï¼š

- **è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­æŒ‡å®šçš„**é…ç½®å‚æ•°**ã€‚

- ```createGroupLogger()```æ—¶æŒ‡å®šçš„**é…ç½®å‚æ•°**ã€‚

- åœ¨**LoggerCore**å®ä¾‹åŒ–å‚æ•°ä¸­æŒ‡å®šçš„**é…ç½®å‚æ•°**ã€‚

åœ¨é»˜è®¤çš„**é…ç½®å‚æ•°**åº”ç”¨è§„åˆ™æ— æ³•æ»¡è¶³å®é™…éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹**LoggerCore**å®ä¾‹çš„```onBuildLogger```å±æ€§ä»¥å®šåˆ¶**æ—¥å¿—è¾“å‡ºå™¨**çš„åˆ›å»ºè¡Œä¸ºï¼Œå…·ä½“å°†åœ¨[è¿è¡ŒåŸç†](#è¿è¡ŒåŸç†)ä¸€èŠ‚ä¸­è®¨è®ºã€‚

### è¿è¡ŒåŸç†

æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ**LoggerCore**å®ä¾‹å°†åœ¨æ‰§è¡Œ```createGroupLogger()```æ—¶åˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹å¹¶å‘å…¶ä¸­æ¤å…¥**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚äºæ˜¯ï¼Œå°æœ‹å‹ä½ æ˜¯å¦æœ‰å¾ˆå¤šé—®å·ï¼š

- **æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹å¦‚ä½•åˆ›å»ºï¼Ÿ

- **æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ä½•æ—¶åˆ›å»ºï¼Ÿ

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å›´ç»•è¿™ä¸¤ä¸ªé—®é¢˜è®¨è®º**LoggerCore**çš„è¿è¡ŒåŸç†ã€‚

---

å¯¹äº**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹å¦‚ä½•åˆ›å»º**ï¼Œç­”æ¡ˆéå¸¸ç®€å•ï¼š**LoggerCore**å°†åœ¨éœ€è¦åˆ›å»º**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**æŸä¸ª**æ—¥å¿—è¾“å‡ºå™¨**æ—¶ï¼Œæå–å…¶åœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**æŒ‡å®šçš„é…ç½®å‚æ•°å¹¶è°ƒç”¨å®ä¾‹æ–¹æ³•```onBuildLogger()```ã€‚

```onBuildLogger()```æ¥æ”¶ä¸‰ä¸ªå‚æ•°ç”¨äºåˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ï¼š

- **```type```**ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„ç±»å‹ã€‚

- **```loggerConfigs```**ï¼šåœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­æŒ‡å®šçš„**ä¸ªæ€§åŒ–é…ç½®å‚æ•°**ã€‚

- **```defaultConfigs```**ï¼š**LoggerCore**è‡ªåŠ¨åº”ç”¨çš„[é»˜è®¤é…ç½®å‚æ•°](#é»˜è®¤é…ç½®å‚æ•°)ã€‚

ä¸¾ä¸€ä¸ªğŸŒ°ï¼Œæœ‰è¿™æ ·ä¸€ä¸ª**LoggerCore**ï¼š

```javascript
const Core = require('node-corejs');

const loggerCore = new Core.LoggerCore({
  env: 'prod',
  level: 'infos',
  params: { sourcePath: './testlogs' },
  loggers: [{
    type: Core.FileLogger,
    buildTrigger: 'create',
    startTrigger: 'normal',
    closeTrigger: 'normal',
    level: 'error',
    params: { auto: false, filePrefix: 'FileLogger_1' }
  }],
});

```

åœ¨åˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**æ—¶ä½¿ç”¨äº†ï¼š

```javascript
loggerCore.createGroupLogger({ level: 'all', params: { fileName: 'LogFile' } });
```

é‚£ä¹ˆï¼Œ**LoggerCore**è°ƒç”¨```onBuildLogger()```æ—¶å¸¦å…¥çš„å‚æ•°ä¸ºï¼š

```javascript
type = Core.FileLogger;

loggerConfigs = { level: 'error', params: { auto: false, filePrefix: 'FileLogger_1' } };

defaultConfigs = { env: 'prod', level: 'all', params: { sourcePath: './testlogs', fileName: 'LogFile' } };
```

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€çœ‹```onBuildLogger()```çš„é»˜è®¤åˆå¹¶**ä¸ªæ€§åŒ–é…ç½®å‚æ•°**å’Œ**é»˜è®¤é…ç½®å‚æ•°**çš„å®ç°ï¼š

```javascript
onBuildLogger(type, loggerConfigs, defaultConfigs) {
  // å°†ä¸ªæ€§åŒ–åŠŸèƒ½é…ç½®åˆå¹¶è‡³é»˜è®¤åŠŸèƒ½é…ç½®
  const params = Object.assign({}, defaultConfigs.params, loggerConfigs.params);
  // å°†ä¸ªæ€§åŒ–é…ç½®åˆå¹¶è‡³é»˜è®¤é…ç½®å¹¶åˆå¹¶åŠŸèƒ½é…ç½®
  const configs = Object.assign({}, defaultConfigs, loggerConfigs, { params });
  // æ‰§è¡Œè¾“å‡ºå™¨çš„å®ä¾‹åŒ–
  return new type(configs);
}
```

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹**LoggerCore**å®ä¾‹çš„```onBuildLogger```å±æ€§è¿›è¡Œæ›´æ”¹ä»¥å˜æ›´é»˜è®¤çš„**æ—¥å¿—è¾“å‡ºå™¨**åˆ›å»ºè¡Œä¸ºã€‚

```javascript
const Core = require('node-corejs');

// åˆ›å»ºLoggerCoreå®ä¾‹
const loggerCore = new Core.LoggerCore({
  env: 'prod',
  level: 'infos',
  params: { sourcePath: './testlogs' },
  loggers: [{
    type: Core.FileLogger,
    buildTrigger: 'create',
    startTrigger: 'normal',
    closeTrigger: 'normal',
    level: 'error',
    params: { 
      auto: false, 
      filePrefix: 'FileLogger_1',
      filePrefixAsFileName: false,
    }
  }],
});

// å¿…é¡»åœ¨createGroupLogger()å‰ä¿®æ”¹onBuildLogger()
loggerCore.onBuildLogger = (type, loggerConfigs, defaultConfigs) => {
  // åœ¨æ–‡ä»¶åä¸­é™„åŠ æ—¥å¿—è¾“å‡ºçš„æ¬¡æ•°
  const { fileName, count } = defaultConfigs.params;
  // åº”ç”¨è‡³åŸæœ‰çš„å‚æ•°åˆå¹¶é€»è¾‘ä¸­
  const params = Object.assign({}, defaultConfigs.params, loggerConfigs.params, { fileName: `${fileName}_${count}` });
  const configs = Object.assign({}, defaultConfigs, loggerConfigs, { params });
  return new type(configs);
};

// è¿›è¡Œæ—¥å¿—è¾“å‡º
let count = 0;

setInterval(() => {
  count += 1;
  // åœ¨åˆ›å»ºæ—¥å¿—è¾“å‡ºç»„æ—¶ä¼ å…¥count
  const logger = loggerCore.createGroupLogger({
    params: { count, fileName: 'LogFile' }
  });
  logger.start();
  logger.log(new Error('ä¸€ä¸ªğŸŒ°æ—¥å¿—'));
  logger.close();
}, 500);
```

---

å¯¹äº**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹ä½•æ—¶åˆ›å»º**ï¼Œ**LoggerCore**å°†æ ¹æ®åœ¨**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­æŒ‡å®šçš„**æ„å»ºè§¦å‘æ–¹å¼**å†³å®šåˆ›å»º**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹çš„æ—¶é—´ç‚¹ã€‚

#### å®ä¾‹åŒ–é˜¶æ®µ
---

1. æ ¹æ®**æ„å»ºè§¦å‘æ–¹å¼**å¯¹**è¾“å‡ºå™¨é…ç½®åˆ—è¡¨**ä¸­çš„é…ç½®å¯¹è±¡è¿›è¡Œåˆ†ç±»ã€‚

2. æå–åˆ†ç±»ç»“æœä¸­ä½¿ç”¨```init```æ–¹å¼è§¦å‘æ„å»ºçš„é…ç½®å¯¹è±¡ï¼Œé€ä¸ªä½¿ç”¨é…ç½®å¯¹è±¡å†…æŒ‡å®šçš„é…ç½®æ‰§è¡Œ```onBuildLogger()```åˆ›å»ºå¯¹åº”çš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹å¹¶å­˜å‚¨åœ¨å®ä¾‹å±æ€§```_baseLoggerObjects```ä¸­ã€‚

#### æ‰§è¡Œ```createGroupLogger()```
---

1. æ ¹æ®```createGroupLogger()```ä¼ å…¥çš„**é…ç½®å‚æ•°**å’Œ**LoggerCore**å®ä¾‹çš„**é…ç½®å‚æ•°**ç”Ÿæˆ**é»˜è®¤é…ç½®å‚æ•°**ã€‚

2. æå–å¹¶è¿­ä»£åˆ†ç±»ç»“æœä¸­ä½¿ç”¨```create```æ–¹å¼è§¦å‘æ„å»ºçš„é…ç½®å¯¹è±¡ï¼Œä½¿ç”¨é…ç½®å¯¹è±¡å†…æŒ‡å®šçš„é…ç½®å‚æ•°å’Œ**é»˜è®¤é…ç½®å‚æ•°**æ‰§è¡Œ```onBuildLogger()```åˆ›å»ºå¯¹åº”çš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ã€‚

2. åˆå¹¶**LoggerCore**å®ä¾‹å±æ€§```_baseLoggerObjects```ä¸­å­˜å‚¨çš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹å’Œâ‘ ä¸­åˆ›å»ºçš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ç»„æˆå¾…æ¤å…¥**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹çš„**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚

3. æ ¹æ®```createGroupLogger()```ä¼ å…¥çš„**æ—¥å¿—è¾“å‡ºç»„ç±»å‹**ï¼Œåˆ›å»ºå¯¹åº”çš„**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹å¹¶å‘å…¶æ¤å…¥â‘¡ä¸­å¾—åˆ°çš„**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚

### åˆ›å»ºè¾“å‡ºç»„

åœ¨å®ç°ç»†èŠ‚ä¸Šï¼Œ**æ—¥å¿—è¾“å‡ºç»„**ç»§æ‰¿è‡ª[åŸºç¡€è¾“å‡ºå™¨](/guide/logger-introduce.html#åŸºç¡€è¾“å‡ºå™¨)ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**é«˜é˜¶æ—¥å¿—è¾“å‡ºå™¨**ã€‚è™½ç„¶ç›®å‰æ²¡æœ‰å¼€æ”¾æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**çš„**åŠŸèƒ½é…ç½®å‚æ•°**çš„ç›¸å…³APIï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨**æ—¥å¿—è¾“å‡ºç»„**ä¹‹å‰ä¿®æ”¹å…¶å®ä¾‹å±æ€§ä»¥æ§åˆ¶å…¶è¡¨ç°è¡Œä¸ºï¼Œç›®å‰æ”¯æŒä¿®æ”¹**æ—¥å¿—è¾“å‡ºç»„**çš„ä»¥ä¸‹å±æ€§ï¼š

- ```_errorHandler```
- ```_checkStateInLog```
- ```_checkStateInStart```
- ```_checkStateInClose```

æˆ‘ä»¬å¯ä»¥åœ¨[åŸºç¡€è¾“å‡ºå™¨](/guide/logger-introduce.html#åŸºç¡€è¾“å‡ºå™¨)çš„[åŠŸèƒ½å‚æ•°](/guide/logger-introduce.html#åŠŸèƒ½å‚æ•°)ä¸€èŠ‚ä¸­æ ¹æ®å…¶åŒåçš„**åŠŸèƒ½é…ç½®å‚æ•°**äº†è§£è¿™äº›å®ä¾‹å±æ€§çš„ä½œç”¨ã€‚

---

```createGroupLogger()```æ”¯æŒå¤šç§è°ƒç”¨æ–¹å¼ï¼š

- **```createGroupLogger()```**ï¼šä¸æŒ‡å®šé…ç½®å‚æ•°åˆ›å»º[åŸºç¡€è¾“å‡ºç»„](#åŸºç¡€è¾“å‡ºç»„)çš„å®ä¾‹ã€‚
- **```createGroupLogger(type)```**ï¼šä¸æŒ‡å®šé…ç½®å‚æ•°åˆ›å»ºæŒ‡å®šçš„**æ—¥å¿—è¾“å‡ºç»„**çš„å®ä¾‹ã€‚
- **```createGroupLogger(configs)```**ï¼šä½¿ç”¨æŒ‡å®šé…ç½®å‚æ•°åˆ›å»º[åŸºç¡€è¾“å‡ºç»„](#åŸºç¡€è¾“å‡ºç»„)çš„å®ä¾‹ã€‚
- **```createGroupLogger(type, configs)```**ï¼šä½¿ç”¨æŒ‡å®šé…ç½®å‚æ•°åˆ›å»ºæŒ‡å®šçš„**æ—¥å¿—è¾“å‡ºç»„**çš„å®ä¾‹ã€‚

::: warning æ³¨æ„
```createGroupLogger()```æ‰§è¡Œè¿‡ç¨‹ä¸­å°†å¯¹ä½¿ç”¨çš„**æ—¥å¿—è¾“å‡ºç»„**ç±»å‹è¿›è¡Œæ ¡éªŒã€‚å‡ºäºä¿è¯åº”ç”¨ç¨‹åºçš„å¯ç”¨æ€§è€ƒè™‘ï¼Œå¦‚æœä½¿ç”¨äº†æ— æ•ˆçš„**æ—¥å¿—è¾“å‡ºç»„**ç±»å‹ï¼ˆå³ï¼šéç»§æ‰¿è‡ª[åŸºç¡€è¾“å‡ºç»„](#åŸºç¡€è¾“å‡ºç»„)çš„[è‡ªå®šä¹‰è¾“å‡ºç»„](/guide/logger-group-customizing.html)ï¼‰ï¼Œå°†é»˜è®¤åˆ›å»º**åŸºç¡€è¾“å‡ºç»„**çš„å®ä¾‹ã€‚
:::

---

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨**LoggerCore**å®ç°ä¸€ä¸ªå¤æ‚çš„ç»„åˆæ—¥å¿—è¾“å‡ºåœºæ™¯ï¼š

**ç›®æ ‡1**ï¼š

- ä¿ç•™æœ€è¿‘5ä¸ªå½’æ¡£æ—¥æœŸå†…çš„æ—¥å¿—ã€‚

- å°†æ¯ç§’å†…äº§ç”Ÿçš„æ—¥å¿—å½’æ¡£è‡³åŒä¸€**æ—¥å¿—æ–‡ä»¶**ï¼Œè¶…å‡º```1KB```æ—¶è‡ªåŠ¨åˆ†å‰²ã€‚

- **æ—¥å¿—æ–‡ä»¶**æŒ‰ç…§**å½’æ¡£å‰ç¼€**å­˜å‚¨ï¼Œä¸”**æ—¥å¿—æ–‡ä»¶å**ä¸­ä¸å±•ç¤º**å½’æ¡£å‰ç¼€**ã€‚

**ç›®æ ‡2**ï¼š

- ä¿ç•™æœ€è¿‘10ç§’å†…çš„æ—¥å¿—ã€‚

- **æ—¥å¿—æ–‡ä»¶å**ä¸­å±•ç¤º**å½’æ¡£æ—¶é—´**ï¼Œä½†ä¸å±•ç¤º**å½’æ¡£å‰ç¼€**ã€‚

- **æ—¥å¿—æ–‡ä»¶**æŒ‰ç…§**å½’æ¡£å‰ç¼€**å­˜å‚¨ï¼Œå¹¶å°†æ¯5ç§’å†…äº§ç”Ÿçš„**æ—¥å¿—æ–‡ä»¶**å½’æ¡£è‡³åŒä¸€æ–‡ä»¶ã€‚

```javascript
const Core = require('node-corejs');

// åˆ›å»ºLoggerCore
const loggerCore = new Core.LoggerCore({
  env: 'prod',
  level: 'infos',
  params: {
    // æŒ‡å®šç»Ÿä¸€çš„å½’æ¡£æºç›®å½•
    sourcePath: './testlogs',
  },
  loggers: [{
    // ä½¿ç”¨å…±äº«çš„æ—¥æœŸè¾“å‡ºå™¨å®ç°ç›®æ ‡1
    type: Core.DateLogger,
    buildTrigger: 'init',                // åœ¨LoggerCoreå®ä¾‹åŒ–æ—¶åˆ›å»ºæ—¥æœŸè¾“å‡ºå™¨
    startTrigger: 'none',                // æ—¥æœŸè¾“å‡ºå™¨è‡ªåŠ¨å¯åŠ¨,LoggerCoreæ— éœ€æ§åˆ¶å…¶å¯åŠ¨åŠ¨ä½œ
    closeTrigger: 'none',
    params: {
      filePrefix: 'Cycle_1s',            // å½’æ¡£å‰ç¼€
      keepDateNum: 5,                    // ä¿ç•™æœ€è¿‘5ä¸ªå½’æ¡£æ—¥æœŸ
      maxSize: 1024,                     // æœ€å¤§æ—¥å¿—æ–‡ä»¶ä½“ç§¯ä¸º1K
      dateFormat: 'YYYY-MM-DD_HH_mm_ss', // ä»¥ç§’ä½œä¸ºå½’æ¡£å‘¨æœŸ
      filePrefixAsFileName: false,       // æ—¥å¿—æ–‡ä»¶åä¸é™„åŠ å½’æ¡£å‰ç¼€
      filePrefixAsSourcePath: true,      // åœ¨å½’æ¡£æºç›®å½•ä¸­åˆ›å»ºå½’æ¡£å‰ç¼€ç›®å½•
    }
  }, {
    // ä½¿ç”¨éå…±äº«çš„æ–‡ä»¶è¾“å‡ºå™¨å®ç°ç›®æ ‡2
    type: Core.FileLogger,
    buildTrigger: 'create',              // åœ¨æ‰§è¡ŒcreateGroupLogger()æ—¶åˆ›å»ºæ–°çš„æ–‡ä»¶è¾“å‡ºå™¨
    startTrigger: 'none',                // æ–‡ä»¶è¾“å‡ºå™¨è‡ªåŠ¨å¯åŠ¨,LoggerCoreæ— éœ€æ§åˆ¶å…¶å¯åŠ¨åŠ¨ä½œ
    closeTrigger: 'none',                // æ–‡ä»¶è¾“å‡ºå™¨è‡ªåŠ¨å…³é—­,LoggerCoreæ— éœ€æ§åˆ¶å…¶å…³é—­åŠ¨ä½œ
    params: {
      filePrefix: 'Duration_5s',         // å½’æ¡£å‰ç¼€
      keepDateNum: 2,                    // ä¿ç•™æœ€è¿‘2ä¸ªå½’æ¡£æ—¥æœŸï¼Œ2*5=10ç§’
      fileName: '_',                     // å½’æ¡£æ–‡ä»¶å
      filePrefixAsFileName: false,       // æ—¥å¿—æ–‡ä»¶åä¸é™„åŠ å½’æ¡£å‰ç¼€
      filePrefixAsSourcePath: true,      // åœ¨å½’æ¡£æºç›®å½•ä¸­åˆ›å»ºå½’æ¡£å‰ç¼€ç›®å½•
      dateFormat: 'YYYY-MM-DD_HH_mm_ss', // ä»¥ç§’ä½œä¸ºå½’æ¡£å‘¨æœŸ
      dateAsFileName: true,              // æ—¥å¿—æ–‡ä»¶åé™„åŠ å½’æ¡£æ—¥æœŸ
      dateAsSourcePath: false,           // ä¸ä½¿ç”¨å½’æ¡£æ—¥æœŸåˆ†ç±»æ—¥å¿—æ–‡ä»¶
    }
  }],
});

let logger = null;
// æ¯äº”ç§’åˆ›å»ºæ–°çš„æ—¥å¿—è¾“å‡ºç»„
function refreshLogger() {
  logger && logger.close();
  logger = loggerCore.createGroupLogger();
  logger.start();
}
refreshLogger();
setInterval(() => refreshLogger(), 5000);

// æ¯100msè¾“å‡ºä¸€æ¬¡æ—¥å¿—
setInterval(() => {
  logger.log(new Error('ä¸€ä¸ªğŸŒ°æ—¥å¿—'));
}, 100);
```

## åŸºç¡€è¾“å‡ºç»„

**åŸºç¡€è¾“å‡ºç»„**æä¾›äº†ç»„åˆ**æ—¥å¿—è¾“å‡ºå™¨**å¹¶æ§åˆ¶å…¶è¡Œä¸ºçš„åŸºæœ¬èƒ½åŠ›ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨[è‡ªå®šä¹‰è¾“å‡ºç»„](/guide/logger-group-customizing.html)æ—¶éœ€è¦ç»§æ‰¿**åŸºç¡€è¾“å‡ºç»„**ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨**LoggerCore**å®ä¾‹æ‰§è¡Œ```createGroupLogger()```æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†æ— æ•ˆçš„**æ—¥å¿—è¾“å‡ºç»„**ç±»å‹å°†é»˜è®¤åˆ›å»º**åŸºç¡€è¾“å‡ºç»„**çš„å®ä¾‹ã€‚

### è¿è¡ŒåŸç†

**åŸºç¡€è¾“å‡ºç»„**å®è´¨ä¸Šé€šè¿‡[è‡ªå®šä¹‰è¾“å‡ºå™¨](/guide/logger-customizing.html)çš„æ–¹å¼å®ç°ï¼Œæˆ‘ä»¬å°†å›´ç»•å®šåˆ¶éƒ¨åˆ†è®¨è®º**åŸºç¡€è¾“å‡ºç»„**çš„è¿è¡ŒåŸç†ã€‚

#### æ„é€ å‡½æ•°
---

æˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ**LoggerCore**åœ¨åˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**æ—¶ä¼šå‘å…¶ä¸­æ¤å…¥**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ã€‚å…¶å®ï¼Œ**æ—¥å¿—è¾“å‡ºç»„**å°†æŒæœ‰å…¶å¯¹åº”çš„**LoggerCore**å®ä¾‹çš„å¼•ç”¨ä»¥ç»´æŒæ´¾ç”Ÿå…³ç³»ã€‚å› æ­¤ï¼Œ**æ—¥å¿—è¾“å‡ºç»„**çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š

- ```loggerCore```ï¼šåˆ›å»º**æ—¥å¿—è¾“å‡ºç»„**çš„**LoggerCore**å®ä¾‹

- ```_loggerObjects```ï¼š**æ—¥å¿—è¾“å‡ºå™¨**çš„å®ä¾‹åˆ—è¡¨

---

åœ¨æ„é€ é˜¶æ®µï¼Œ**æ—¥å¿—è¾“å‡ºç»„**æ‰§è¡Œäº†ä¸‰ä¸ªåŠ¨ä½œï¼š

1. å°†æ´¾ç”Ÿ**æ—¥å¿—è¾“å‡ºç»„**çš„**LoggerCore**å®ä¾‹å­˜å‚¨è‡³å®ä¾‹å±æ€§```loggerCore```ã€‚

2. å°†**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ä½œä¸ºè‡ªå®šä¹‰åŠŸèƒ½é…ç½®å‚æ•°ç”Ÿæˆ**æ—¥å¿—è¾“å‡ºç»„**çš„é…ç½®å¯¹è±¡ã€‚

3. ä½¿ç”¨â‘¡ä¸­å¾—åˆ°çš„é…ç½®å¯¹è±¡æ‰§è¡Œ```super()```æ“ä½œå®Œæˆå®ä¾‹åŒ–ã€‚

::: tip æç¤º
åœ¨[è‡ªå®šä¹‰è¾“å‡ºå™¨](/guide/logger-customizing.html)æ—¶æ‰§è¡Œ```super()```æ“ä½œå°†è‡ªåŠ¨å¼•å¯¼æ„é€ æµç¨‹è¿›å…¥åˆå§‹åŒ–é˜¶æ®µã€‚

å› æ­¤ï¼Œä¸ºäº†é¿å…æ‰§è¡Œé€»è¾‘æ··ä¹±ï¼Œåœ¨**æ„é€ å‡½æ•°**ä¸­ä»…ä½¿ç”¨åŠŸèƒ½é…ç½®å‚æ•°çš„ç¼“å­˜æœºåˆ¶å­˜å‚¨**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ï¼Œè€Œå°†å®é™…çš„æ„é€ é€»è¾‘æ”¾åœ¨[åˆå§‹åŒ–é˜¶æ®µ](#initlogger)ã€‚
:::

#### ```initLogger()```
---

åœ¨è®¨è®º[LoggerCore](#loggercore)æ—¶æˆ‘ä»¬å·²ç»æåˆ°è¿‡ï¼Œ**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**ä¸­çš„å…ƒç´ å…¶å®å¹¶ä¸ä»…ä»…æ˜¯**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹æœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«äº†**æ—¥å¿—è¾“å‡ºå™¨**çš„è¡Œä¸ºè§¦å‘æ–¹å¼çš„```Object```ã€‚**æ—¥å¿—è¾“å‡ºç»„**å°†æ ¹æ®**è¡Œä¸ºè§¦å‘æ–¹å¼**æ§åˆ¶å…¶ç»„åˆçš„**æ—¥å¿—è¾“å‡ºå™¨**æ‰§è¡Œå¯åŠ¨/å…³é—­åŠ¨ä½œã€‚

å› æ­¤ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µä¸­å°†é¢„å…ˆè§£æ**æ—¥å¿—è¾“å‡ºå™¨å®ä¾‹åˆ—è¡¨**æå–**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹å®Œæˆæ—¶ç©ºè½¬æ¢ï¼š

- æå–ä½¿ç”¨```normal```æ–¹å¼è§¦å‘å¯åŠ¨çš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ï¼Œå­˜å‚¨åœ¨å®ä¾‹å±æ€§```_needStartLoggers```ä¸­ã€‚

- æå–ä½¿ç”¨```normal```æ–¹å¼è§¦å‘å…³é—­çš„**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹ï¼Œå­˜å‚¨åœ¨å®ä¾‹å±æ€§```_needCloseLoggers```ä¸­ã€‚

- å°†æ‰€æœ‰**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹å­˜å‚¨åœ¨å®ä¾‹å±æ€§```_loggers```ä¸­ã€‚

#### ```onStart()```
---

åœ¨**æ—¥å¿—è¾“å‡ºç»„**çš„**å¯åŠ¨é˜¶æ®µ**ï¼Œä¸ä»…éœ€è¦å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**ä¸ºå¯åŠ¨çŠ¶æ€ï¼›å¯¹äºä½¿ç”¨```normal```ä½œä¸ºå¯åŠ¨è§¦å‘æ–¹å¼çš„**æ—¥å¿—è¾“å‡ºå™¨**ï¼Œè¿˜éœ€åœ¨æ­¤é˜¶æ®µæ‰§è¡Œå¯åŠ¨åŠ¨ä½œã€‚å› æ­¤ï¼Œåœ¨**å¯åŠ¨é˜¶æ®µ**ï¼š

1. æ‰§è¡Œ```super.onStart()```å°è¯•å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**ä¸ºå¯åŠ¨çŠ¶æ€ï¼Œå¦‚æœå˜æ›´çŠ¶æ€å¤±è´¥åˆ™ä¸å†æ‰§è¡Œâ‘¡ã€‚

2. è¿­ä»£å®ä¾‹å±æ€§```_needStartLoggers```ï¼Œæ‰§è¡Œæ¯ä¸ª**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹çš„å¯åŠ¨é€»è¾‘ã€‚

::: danger æ³¨æ„
æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹çš„å®ä¾‹å±æ€§```_checkStateInStart```å°†æ§åˆ¶æ‰§è¡Œ```super.onStart()```æ—¶æ˜¯å¦åœ¨å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**å¯åŠ¨çŠ¶æ€å‰æ‰§è¡ŒçŠ¶æ€æ ¡éªŒè¿›è€Œå½±å“**æ‰§è¡Œç»“æœ**ã€‚

åœ¨**å¯åŠ¨é˜¶æ®µ**çš„é»˜è®¤è¡Œä¸ºä¸‹ï¼Œå°†é€šè¿‡åˆ¤æ–­```super.onStart()```çš„**æ‰§è¡Œç»“æœ**ä»¥é¿å…**æ—¥å¿—è¾“å‡ºå™¨**çš„å¯åŠ¨é€»è¾‘å¤šæ¬¡æ‰§è¡Œã€‚å› æ­¤ï¼Œè¯·è°¨æ…è°ƒæ•´```_checkStateInStart```ã€‚
:::

#### ```onClose()```
---

ä¸**æ—¥å¿—è¾“å‡ºç»„**çš„**å¯åŠ¨é˜¶æ®µ**ç±»ä¼¼ï¼Œ**å…³é—­é˜¶æ®µ**ä¸ä»…éœ€è¦å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**ä¸ºå…³é—­çŠ¶æ€ï¼›å¯¹äºä½¿ç”¨```normal```ä½œä¸ºå…³é—­è§¦å‘æ–¹å¼çš„**æ—¥å¿—è¾“å‡ºå™¨**ï¼Œè¿˜éœ€åœ¨æ­¤é˜¶æ®µæ‰§è¡Œå…³é—­åŠ¨ä½œã€‚å› æ­¤ï¼Œåœ¨**å…³é—­é˜¶æ®µ**ï¼š

1. æ‰§è¡Œ```super.onClose()```å°è¯•å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**ä¸ºå…³é—­çŠ¶æ€ï¼Œå¦‚æœå˜æ›´çŠ¶æ€å¤±è´¥åˆ™ä¸å†æ‰§è¡Œâ‘¡ã€‚

2. è¿­ä»£å®ä¾‹å±æ€§```_needCloseLoggers```ï¼Œæ‰§è¡Œæ¯ä¸ª**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹çš„å…³é—­é€»è¾‘ã€‚

::: danger æ³¨æ„
æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹çš„å®ä¾‹å±æ€§```_checkStateInClose```å°†æ§åˆ¶æ‰§è¡Œ```super.onClose()```æ—¶æ˜¯å¦åœ¨å˜æ›´**æ—¥å¿—è¾“å‡ºç»„**å¯åŠ¨çŠ¶æ€å‰æ‰§è¡ŒçŠ¶æ€æ ¡éªŒè¿›è€Œå½±å“**æ‰§è¡Œç»“æœ**ã€‚

åœ¨**å…³é—­é˜¶æ®µ**çš„é»˜è®¤è¡Œä¸ºä¸‹ï¼Œå°†é€šè¿‡åˆ¤æ–­```super.onClose()```çš„**æ‰§è¡Œç»“æœ**ä»¥é¿å…**æ—¥å¿—è¾“å‡ºå™¨**çš„å…³é—­é€»è¾‘å¤šæ¬¡æ‰§è¡Œã€‚å› æ­¤ï¼Œè¯·è°¨æ…è°ƒæ•´```_checkStateInClose```ã€‚
:::

#### ```onLog()```

**æ—¥å¿—è¾“å‡ºç»„**æœ¬èº«å¹¶ä¸äº§ç”Ÿä»»ä½•æ—¥å¿—ï¼Œè€Œæ˜¯é€šè¿‡æ§åˆ¶å…¶ç»„åˆçš„**æ—¥å¿—è¾“å‡ºå™¨**è¾“å‡ºæ—¥å¿—ã€‚å› æ­¤ï¼Œ**æ—¥å¿—è¾“å‡ºç»„**æ‰§è¡Œè¾“å‡ºåŠ¨ä½œæ—¶ï¼š

1. ä½¿ç”¨```onCheckState(BASE_LOGGER_STATE_TYPE_CAN_LOG)```æ£€æµ‹å½“å‰çŠ¶æ€æ˜¯å¦å…è®¸æ—¥å¿—è¾“å‡ºï¼Œåœ¨**æ—¥å¿—è¾“å‡ºç»„**å½“å‰çŠ¶æ€ä¸å…è®¸æ—¥å¿—è¾“å‡ºæ—¶å°†æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯ä¸”ä¸å†æ‰§è¡Œâ‘¡ã€‚

2. è¿­ä»£å®ä¾‹å±æ€§```_loggers```ï¼Œæ‰§è¡Œæ¯ä¸ª**æ—¥å¿—è¾“å‡ºå™¨**å®ä¾‹çš„```log()```è¿›è¡Œæ—¥å¿—è¾“å‡ºã€‚

::: danger æ³¨æ„
æŒ‡å®š**æ—¥å¿—è¾“å‡ºç»„**å®ä¾‹çš„å®ä¾‹å±æ€§```_checkStateInLog```å°†æ§åˆ¶æ‰§è¡Œ```onCheckState(BASE_LOGGER_STATE_TYPE_CAN_LOG)```æ—¶æ˜¯å¦æ‰§è¡Œ**æ—¥å¿—è¾“å‡ºç»„**çš„å¯åŠ¨çŠ¶æ€æ ¡éªŒã€‚

åœ¨é»˜è®¤çš„è¾“å‡ºè¡Œä¸ºä¸­ï¼Œæœªå¯åŠ¨**æ—¥å¿—è¾“å‡ºç»„**æ—¶å°†æ‹’ç»æ‰§è¡Œå®é™…è¾“å‡ºåŠ¨ä½œä»¥ä¿è¯èµ„æºçš„æœ‰æ•ˆæ€§ã€‚å› æ­¤ï¼Œè¯·è°¨æ…è°ƒæ•´```_checkStateInLog```ã€‚
:::

### å®šåˆ¶è¾“å‡ºç»„

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®šåˆ¶ä¸€ä¸ªç®€å•çš„**æ—¥å¿—è¾“å‡ºç»„**ç”¨äºå®¢æˆ·ç«¯è¯·æ±‚å¤„ç†é“¾è·¯çš„æ—¥å¿—æ”¶é›†ï¼š

- è®°å½•```start()```å’Œ```close()```æ—¶é—´å·®ç»Ÿè®¡å¤„ç†è€—æ—¶ã€‚

- æ‰§è¡Œ```start()```å’Œ```close()```æ—¶è‡ªåŠ¨è¾“å‡ºå¼€å¯å’Œå…³é—­æ—¥å¿—ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ç»§æ‰¿è‡ª```Core.GroupLogger```çš„æ–¹å¼å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„**æ—¥å¿—è¾“å‡ºç»„**ï¼š

```javascript
const Core = require('node-corejs');

/**
 * è‡ªå®šä¹‰æ—¥å¿—è¾“å‡ºç»„
 */
class HandlerLogger extends Core.GroupLogger {
  initLogger(configs) {
    super.initLogger(configs);
    this.startTime = null;
  }

  onStart() {
    // å°è¯•æ‰§è¡ŒåŸå§‹å¯åŠ¨é€»è¾‘
    // åœ¨åŸå§‹å¯åŠ¨é€»è¾‘æ‰§è¡Œå¤±è´¥æ—¶ä¸å†æ‰§è¡Œåç»­é€»è¾‘
    if (!super.onStart()) {
      return false;
    }

    // å¯åŠ¨æˆåŠŸæ—¶è®°å½•å¯åŠ¨æ—¶é—´å¹¶è¾“å‡ºæ—¥å¿—
    this.startTime = new Date();
    this.log('i', 'å¤„ç†å¼€å§‹', `è¯·æ±‚å¤„ç†çš„å¼€å§‹æ—¶é—´:[${Core.Utils.formatDate(this.startTime, 'YYYY-MM-DD HH:mm:ss.SSS')}]`);
    return true;
  }

  onClose() {
    // æ£€æµ‹å½“å‰çŠ¶æ€æ˜¯å¦å…è®¸è¾“å‡ºæ—¥å¿—
    // å…è®¸è¾“å‡ºæ—¥å¿—æ—¶å°†è®°å½•å…³é—­æ—¶é—´å¹¶è¾“å‡ºæ—¥å¿—
    if (this.onCheckState(Core.Macros.BASE_LOGGER_CHECK_TYPE_CAN_LOG)) {
      const closeTime = new Date();
      this.log('i', 'å¤„ç†ç»“æŸ', `è¯·æ±‚å¤„ç†çš„ç»“æŸæ—¶é—´:[${Core.Utils.formatDate(closeTime, 'YYYY-MM-DD HH:mm:ss.SSS')}}],å¤„ç†è€—æ—¶:[${closeTime - this.startTime}]ms`);
    }

    // æ‰§è¡ŒåŸå§‹çš„å…³é—­é€»è¾‘
    return super.onClose();
  }
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¡®å®šæ—¥å¿—æ”¶é›†çš„åœºæ™¯ï¼š

- å°†æ¯æ¬¡å®¢æˆ·ç«¯è¯·æ±‚å¤„ç†é“¾è·¯ä¸­äº§ç”Ÿçš„æ—¥å¿—è¾“å‡ºè‡³åŒä¸€æ–‡ä»¶ã€‚

- æŒ‰ç…§**è¯·æ±‚è·¯å¾„**å’Œ**è¯·æ±‚æ—¥æœŸ**å¯¹**æ—¥å¿—æ–‡ä»¶**è¿›è¡Œåˆ†ç±»ã€‚

- **æ—¥å¿—æ–‡ä»¶å**ä¸­éœ€è¦ä¿ç•™**è¯·æ±‚æ–¹å¼**å’Œ**è¯·æ±‚æ—¶é—´**ã€‚

- ä¿ç•™æœ€è¿‘**7**å¤©çš„æ—¥å¿—ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼åˆ›å»º**LoggerCore**ï¼š

```javascript
const loggerCore = new Core.LoggerCore({
  env: 'prod',
  level: 'infos',
  params: { sourcePath: './testlogs' },
  loggers: [
    {
      type: Core.FileLogger,
      buildTrigger: 'create',
      startTrigger: 'normal',
      closeTrigger: 'normal',
      params: {
        auto: false,                  // ä½¿ç”¨æ‰‹åŠ¨æ¨¡å¼
        dateFormat: 'YYYY-MM-DD',     // ä»¥å¤©ä½œä¸ºå½’æ¡£å‘¨æœŸ
        keepDateNum: 7,               // ä¿ç•™æœ€è¿‘7ä¸ªå½’æ¡£æ—¥æœŸ
        dateAsFileName: false,        // æ—¥å¿—æ–‡ä»¶åä¸é™„åŠ å½’æ¡£æ—¥æœŸ
        dateAsSourcePath: true,       // ä½¿ç”¨å½’æ¡£æ—¥æœŸåˆ†ç±»æ—¥å¿—æ–‡ä»¶
        filePrefixAsFileName: false,  // æ—¥å¿—æ–‡ä»¶åä¸é™„åŠ å½’æ¡£å‰ç¼€
        filePrefixAsSourcePath: true, // ä½¿ç”¨å½’æ¡£å‰ç¼€åˆ†ç±»æ—¥å¿—æ–‡ä»¶
      }
    }
  ],
});
```

æœ€åï¼Œè®©æˆ‘ä»¬ç»“åˆ**ServiceCore**å®ç°å¯¹å®¢æˆ·ç«¯è¯·æ±‚å¤„ç†é“¾è·¯çš„æ—¥å¿—æ”¶é›†ï¼š

```javascript
class TestHandler extends Core.Handler {
  static getRoutePath() {
    return '/Test.do';
  }

  initHandler(req, res) {
    // åœ¨åˆå§‹åŒ–é˜¶æ®µåˆ›å»ºæ—¥å¿—è¾“å‡ºç»„
    const method = req.method.toUpperCase();
    this.logger = loggerCore.createGroupLogger(HandlerLogger, {
      params: {
        filePrefix: 'Test.do',
        fileName: `${method}-${Core.Utils.formatDate(new Date(), 'YYYY-MM-DD_HH_mm_ss_SSS')}-[%RANDOM_FILE_NAME%]`,
      }
    });
    // å¯åŠ¨æ—¥å¿—è¾“å‡ºç»„
    this.logger.start();
  }

  getHandler(req, res, next) {
    // è®°å½•é“¾è·¯æ—¥å¿—
    this.logger.log('i', 'è¿›å…¥GETå¤„ç†é˜¶æ®µ');
    setTimeout(() => {
      next('Hello World');
      this.logger.log('i', 'GETå¤„ç†ç»“æŸ,å‘å®¢æˆ·ç«¯è¿”å›');
    }, 500);
  }

  destroyHandler(req, res) {
    // åœ¨ææ„é˜¶æ®µå…³é—­æ—¥å¿—è¾“å‡ºç»„
    this.logger.close();
  }
}

// åˆ›å»ºServiceCore
const serviceCore = new Core.ServiceCore();
serviceCore.bind([TestHandler]);
serviceCore.start();
```

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—®ä½¿ç”¨```curl http://localhost:3000/Test.do```æ¥æ£€éªŒå®ç°æˆåŠŸå•¦ï¼