# 日志收集

Corejs提供了高拓展性的日志收集系统：

- 使用[日志输出器](#日志输出器)进行单点日志输出。
- 使用[日志输出组](#日志输出组)进行组合日志输出。

::: tip 说明
[日志输出组](#日志输出组)提供了将一个或多个[日志输出器](#日志输出器)进行组合的能力，并且**日志输出器**和**日志输出组**都可以进行深度定制。

通常，我们通过[自定义输出组](/guide/logger-group-customizing.html)将日志输出与业务逻辑结合。
:::

**日志输出器**和**日志输出组**在使用上非常相似：

- 使用```log()```输出日志。将执行状态监测，仅允许在输出器/组启动状态下调用。
- 使用```start()```启动输出器/组。将执行状态监测，仅允许在输出器/组关闭状态下调用，此操作将创建输出器/组所需的资源（如：文件句柄等）并改变输出器/组为启动状态。
- 使用```close()```关闭输出器/组。将执行状态监测，仅允许在输出器/组启动状态下调用，此操作将释放输出器/组占用的资源（如：文件句柄等）并改变输出器/组为关闭状态。

::: warning 注意
**日志输出器**和**日志输出组**仅在使用上具有相似性，其获取方式和输出原理完全不同：

在获取方式上：
- **日志输出器**：使用输出器配置直接实例化。
- **日志输出组**：使用需要组合的输出器配置创建**LoggerCore实例**，然后使用**LoggerCore实例**执行```createGroupLogger()```生成输出组实例。

在输出原理上：
- **日志输出器**：将按照[输出模型](/guide/logger-introduce.html#输出模型)进行日志输出。
- **日志输出组**：将迭代执行其内置**日志输出器**的```log()```进行日志输出。

通常，**日志输出器**支持自动启动/关闭，无需显示调用```start()```和```close()```；而**日志输出组**一般不支持自动启动/关闭，必须显示执行```start()```和```close()```。
:::

## 日志输出器

**日志输出器**可以在业务层中单独使用；也可以作为[日志输出组](#日志输出组)的单点输出模块。

Corejs内置了多种**日志输出器**：

- [基础输出器](/guide/logger-introduce.html#基础输出器)
- [日期输出器](/guide/logger-introduce.html#日期输出器)
- [文件输出器](/guide/logger-introduce.html#文件输出器)

---

当内置输出器的功能无法满足业务需求时，我们可以考虑：

- 使用[日志输出组](#日志输出组)组合多个**日志输出器**进行多点输出。
- 通过[自定义输出器](/guide/logger-customizing.html)定制满足业务需求的输出器。
- 通过[自定义输出组](/guide/logger-group-customizing.html)使日志输出行为与业务结合。

## 日志输出组

**日志输出组**本质上是一个**高阶日志输出器**。但其本身没有实际日志输出的能力，而是通过迭代调用其组合的**日志输出器**实例的```log()```实现日志输出。

通常，我们通过[自定义输出组](/guide/logger-group-customizing.html)修改其执行```start()```、```close()```、```log()```时的行为使日志输出与业务逻辑结合。

::: warning 注意
**日志输出组**无法直接实例化，而是通过使用[LoggerCore](/guide/logger-group-introduce.html#loggercore)得到输出组实例。因此，**LoggerCore**是生产**日志输出组**的工厂。

我们可以在创建**LoggerCore**实例时指定期望组合的**日志输出器**，在执行```createGroupLogger()```时指定使用的**日志输出组**。**LoggerCore**将根据配置信息自动组合**日志输出器**并生成对应的**日志输出组**。
:::
