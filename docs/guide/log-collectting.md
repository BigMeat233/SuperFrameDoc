# 日志收集

**Corejs提供了高拓展性的日志收集系统：**

- [日志输出器](#日志输出器)：用于进行日志单点输出。
- [日志输出组](#日志输出组)：用于组合[日志输出器](#日志输出器)以进行日志多点输出。

::: tip 说明
[日志输出组](#日志输出组)提供了将一个或多个[日志输出器](#日志输出器)进行组合的能力。

通常，我们通过定制[日志输出器](#日志输出器)和[日志输出组](#日志输出组)的行为以将日志收集与业务逻辑结合。
:::

[日志输出器](#日志输出器)和[日志输出组](#日志输出组)在使用方式上非常相似：

- **使用实例方法```log```输出日志**：于执行过程中自动执行状态检测（可配置），在输出器/组处于启动状态时将输出日志。

- **使用实例方法```start```启动输出器/组**：于执行过程中自动执行状态检测（可配置），在输出器/组处于关闭状态时将创建基础资源（如：文件句柄等）并变更其为启动状态。

- **使用实例方法```close```关闭输出器/组**：于执行过程中自动执行状态检测（可配置），在输出器/组处于启动状态时将释放基础资源（如：文件句柄等）并变更其为关闭状态。

::: tip 说明
**[日志输出组](#日志输出组)本质上是高阶[日志输出器](#日志输出器)**。因此，日志输出器/组的定制规则有一定的相似性。

**但是，它们的实例获取方式和输出原理完全不同。**

**在获取方式上：**

- **日志输出器**：使用```new```关键字和**输出器配置**直接实例化。
- **日志输出组**：首先，使用根据期望聚合的**日志输出器**构造的配置对象创建[LoggerCore](/guide/logger-group-introduce.html#loggercore)实例；然后，执行[LoggerCore](/guide/logger-group-introduce.html#loggercore)的实例方法```createGroupLogger```生成指定类型的**日志输出组**实例。

**在输出原理上：**
- **日志输出器**：按照[输出模型](/guide/logger-introduce.html#输出模型)进行日志输出。
- **日志输出组**：逐个调用其中聚合的**日志输出器**的实例方法```log```进行日志输出。
:::

## 日志输出器

**日志输出器**可以在业务层中单独使用；也可以被聚合在[日志输出组](#日志输出组)中作为单点输出模块。

Corejs内置了多种**日志输出器**以满足常规需求：

- [基础输出器](/guide/logger-introduce.html#基础输出器)
- [日期输出器](/guide/logger-introduce.html#日期输出器)
- [文件输出器](/guide/logger-introduce.html#文件输出器)

---

当内置输出器无法满足业务需求时，我们可以考虑：

- 使用[日志输出组](#日志输出组)聚合多个**日志输出器**进行多点输出。
- 通过[自定义输出器](/guide/logger-customizing.html)定制输出行为。
- 通过[自定义输出组](/guide/logger-group-customizing.html)将日志输出行为与业务结合。

## 日志输出组

**日志输出组**本身没有实际的日志输出能力，而是通过聚合一个或多个**日志输出器**实例，并逐个调用它们的实例方法```log```以实现日志多点输出。

通常，我们通过在[自定义输出组](/guide/logger-group-customizing.html)时修改其实例方法```start```、```close```、```log```执行时的行为将日志收集与业务逻辑结合。

::: warning 注意
**日志输出组无法通过直接实例化得到其实例**。

在使用**日志输出组**时：

1. 根据期望聚合的**日志输出器**构造的配置对象创建[LoggerCore](/guide/logger-group-introduce.html#loggercore)实例。

2. 在执行[LoggerCore](/guide/logger-group-introduce.html#loggercore)的实例方法```createGroupLogger```时**指定期望使用的日志输出组类型以得到其实例。**

**因此，LoggerCore是生产日志输出组的工厂。**
:::
